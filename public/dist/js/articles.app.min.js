var articlesApp=function(){function e(e,n,t){let i=document.getElementById(e);i.addEventListener("submit",(function(e){e.preventDefault();let d=new FormData(i),r=`${window.location.origin}${n}`,a=new XMLHttpRequest;a.open(t,r),a.setRequestHeader("Content-Type","application/json; charset=UTF-8");let l={};d.forEach((function(e,n){l[n]=e})),a.send(JSON.stringify(l)),a.onload=function(){let e=JSON.parse(a.response);!0===e.success?window.location.hash=`#view-${e.article._id}`:document.getElementById("formMsg").style.display="block"}}))}return{load:function(){let n=window.location.hash.split("-");switch(n[0]){case"#create":document.getElementById("app").innerHTML='\n          <div class="card">\n            <div class="card-header clearfix">\n              <h2 class="h3 float-left">Create a New Article</h2>\n              <div class="float-right">\n                <a href="#" class="btn btn-primary">Cancel</a>\n              </div>\n            </div>\n            <div class="card-body">\n              <form id="createArticle" class="card-body">\n                <div id="formMsg" class="alert alert-danger text-center">Your form has errors</div>\n  \n                <div class="row">\n                  <div class="form-group col-md-6">\n                    <label for="title">title</label>\n                    <input type="text" id="title" name="title" class="form-control" required>\n                  </div>\n  \n                  <div class="form-group col-md-6">\n                    <label for="slug">slug</label>\n                    <input type="text" id="slug" name="slug" class="form-control" required>\n                  </div>\n                </div>\n  \n                <div class="row">\n                  <div class="form-group col-md-6">\n                    <label for="description">description</label>\n                    <input type="text" id="description" name="description" class="form-control" required>\n                  </div>\n  \n                  <div class="form-group col-md-6">\n                    <label for="keywords">keywords</label>\n                    <input type="text" id="keywords" name="keywords" class="form-control" required>\n                  </div>\n\n                  <div class="row">\n                  <div class="form-group col-md-6">\n                    <label for="body">body</label>\n                    <input type="text" id="body" name="body" class="form-control" required>\n                  </div>\n  \n                  <div class="form-group col-md-6">\n                    <label for="published">published</label>\n                    <input type="text" id="published" name="published" class="form-control" required>\n                  </div>\n                  \n                  <div class="row">\n                  <div class="form-group col-md-6">\n                    <label for="created">created</label>\n                    <input type="text" id="created" name="created" class="form-control" required>\n                  </div>\n  \n                  <div class="form-group col-md-6">\n                    <label for="modified">modified</label>\n                    <input type="text" id="modified" name="modified" class="form-control" required>\n                  </div>\n                </div>\n  \n                <div class="text-right">\n                  <input type="submit" value="Submit" class="btn btn-lg btn-primary btn-sm-block">\n                </div>\n              </form>\n            </div>\n          </div>\n      ',e("createArticle","/api/articles","POST");break;case"#view":!function(e){let n=`${window.location.origin}/api/users/${e}`,t=new XMLHttpRequest;t.open("GET",n),console.log(data),t.setRequestHeader("Content-Type","application/json; charset=UTF-8"),t.send(),t.onload=function(){let e=document.getElementById("app"),n=JSON.parse(t.response),i="";i=`<div class="card">\n          <div class="card-header clearfix">\n            <h2 class="h3 float-left">${n.user.first_name} ${n.user.last_name}</h2>\n            <div class="float-right">\n              <a href="#edit-${n.user._id}" class="btn btn-primary">Edit</a>\n            </div>\n          </div>\n          <div class="card-body">\n            <div>${n.user.username}</div>\n            <div>${n.user.email}</div>\n          </div>\n        </div>`,e.innerHTML=i}}(n[1]);break;case"#edit":!function(n){let t=`${window.location.origin}/api/users/${n}`,i=new XMLHttpRequest;i.open("GET",t),i.setRequestHeader("Content-Type","application/json; charset=UTF-8"),i.send(),i.onload=function(){let n=document.getElementById("app"),t=JSON.parse(i.response);var d=`\n          <div class="card">\n            <div class="card-header clearfix">\n              <h2 class="h3 float-left">Edit</h2>\n              <div class="float-right">\n                <a href="#" class="btn btn-primary">Cancel</a>\n              </div>\n            </div>\n            <div class="card-body">\n              <form id="editArticle" class="card-body">\n                <input type="hidden" id="_id" name="_id" value="${t.user._id}">\n                <div id="formMsg" class="alert alert-danger text-center">Your form has errors</div>\n  \n                <div class="row">\n                  <div class="form-group col-md-6">\n                    <label for="title">title</label>\n                    <input type="text" id="title" name="title" class="form-control" value="${t.article.title}" required>\n                  </div>\n\n                <div class="row">\n                  <div class="form-group col-md-6">\n                    <label for="slug">slug</label>\n                    <input type="text" id="slug" name="slug" class="form-control" value="${t.article.slug}" required>\n                  </div>\n  \n                <div class="row">\n                  <div class="form-group col-md-6">\n                    <label for="description">description</label>\n                    <input type="text" id="description" name="description" class="form-control" value="${t.article.description}" required>\n                  </div>\n  \n                <div class="row">\n                  <div class="form-group col-md-6">\n                    <label for="keywords">keywords</label>\n                    <input type="text" id="keywords" name="keywords" class="form-control" value="${t.article.keywords}" required>\n                  </div>\n\n                <div class="row">\n                  <div class="form-group col-md-6">\n                    <label for="body">body</label>\n                    <input type="text" id="body" name="body" class="form-control" value="${t.article.body}" required>\n                  </div>\n\n                <div class="row">\n                  <div class="form-group col-md-6">\n                    <label for="published">published</label>\n                    <input type="text" id="published" name="body" class="form-control" value="${t.article.published}" required>\n                  </div>\n\n                <div class="row">\n                  <div class="form-group col-md-6">\n                    <label for="created">created</label>\n                    <input type="text" id="created" name="created" class="form-control" value="${t.article.created}" required>\n                  </div>\n\n                <div class="row">\n                  <div class="form-group col-md-6">\n                    <label for="modified">modified</label>\n                    <input type="text" id="modified" name="modified" class="form-control" value="${t.article.modified}" required>\n                  </div>\n\n                </div>\n  \n                <div class="text-right">\n                  <input type="submit" value="Submit" class="btn btn-lg btn-primary btn-sm-block">\n                </div>\n              </form>\n            </div>\n          </div>\n          <div>\n  <a href="#delete-${t.article._id}" class="text-danger">Delete</a>\n</div>\n        `;n.innerHTML=d,e("editArticle","/api/articles","PUT")}}(n[1]);break;case"#delete":!function(e){let n=`${window.location.origin}/api/articles/${e}`,t=new XMLHttpRequest;t.open("GET",n),t.setRequestHeader("Content-Type","application/json; charset=UTF-8"),t.send(),t.onload=function(){let e=document.getElementById("app"),n=JSON.parse(t.response),i="";i=`<div class="card bg-transparent border-danger text-danger bg-danger">\n        <div class="card-header bg-transparent border-danger">\n          <h2 class="h3 text-center">Your About to Delete a Article</h2>\n        </div>\n        <div class="card-body text-center">\n          <div>\n            Are you sure you want to delete\n            <strong>${n.article.first_name} ${n.article.last_name}</strong>\n          </div>\n  \n          <div>Articlename: <strong>${n.user.username}</strong></div>\n          <div>Email: <strong>${n.user.email}</strong></div>\n          <a onclick="articlesApp.deleteArticle('${n.article._id}');" class="btn btn-lg btn-danger text-white">\n          Yes delete ${n.article.username}\n        </a>\n          <div class="text-center">\n            <br>\n            <a class="btn btn-lg btn-danger text-white">\n              Yes delete ${n.article.username}\n            </a>\n          </div>\n  \n        </div>\n      </div>`,e.innerHTML=i}}(n[1]);break;default:!function(){let e=`${window.location.origin}/api/articles`,n=new XMLHttpRequest;n.open("GET",e),n.setRequestHeader("Content-Type","application/json; charset=UTF-8"),n.send(),n.onload=function(){let e=document.getElementById("app"),t=JSON.parse(n.response).articles,i="",d="";for(let e=0;e<t.length;e++)d+=`<tr>\n          <td>\n          <a href="#view-${t[e]._id}">${t[e].title}, ${t[e].slug}</a>\n          </td>\n          <td>${users[e].body}</td>\n          <td>${users[e].published}</td>\n          <td>${users[e].created}</td>\n          <td>${users[e].modified}</td>\n          </tr>`;i=`<div class="card">\n          <div class="card-header clearfix">\n            <h2 class="h3 float-left">Articles</h2>\n            <div class="float-right">\n              <a href="#create" class="btn btn-primary">New Articles</a>\n            </div>\n          </div>\n          <div class="table-responsive">\n            <table class="table table-striped table-hover table-bordered">\n              <thead>\n                <tr>\n                  <td>title</td>\n                  <td>slug</td>\n                  <td>description</td>\n                  <td>keywords</td>\n                  <td>body</td>\n                  <td>published</td>\n                  <td>created</td>\n                  <td>modified</td>\n                </tr>\n              </thead>\n              <tbody>${d}</tbody>\n            </table>\n          </div>\n        </div>`,e.innerHTML=i}}()}},deleteArticle:function(e){!function(e){let n=`${window.location.origin}/api/articles/${e}`,t=new XMLHttpRequest;t.open("DELETE",n),t.setRequestHeader("Content-Type","application/json; charset=UTF-8"),t.send(),t.onload=function(){!0===JSON.parse(t.response).success?window.location.hash="#":alert("Unknown error, the article could not be deleted")}}(e)}}}();articlesApp.load(),window.addEventListener("hashchange",(function(){articlesApp.load()}));